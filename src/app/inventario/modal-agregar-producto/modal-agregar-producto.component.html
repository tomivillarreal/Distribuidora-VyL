<div mat-dialog-title>{{ tipoModal }} Producto</div>

<div
  mat-dialog-content
  class="flex flex-col h-screen w-screen flex-wrap md:h-max md:w-[1000px]"
>
  <div class="flex flex-col md:flex-row m-6">
    <div class="h-fit flex flex-col items-center w-full" id="div-fotoProducto">
      <div
        class="w-[150px] h-[150px] md:w-[300px] md:h-[300px] border-solid border-2"
      >
        <img
          [src]="productoRecibido.foto"
          alt=""
          autocomplete="off"
          class="aspect-square"
        />
      </div>
      <!-- <input
        class="w-fit h-fit"
        type="file"
        value=""
        alt=""
        #fotoProducto
        [(ngModel)]="imagen"
      /> -->

      <!-- <form
        action="/file"
        method="post"
        enctype="multipart/form-data"
        id="formImagen"
      >
        <input type="file" name="image" id="image" />
        <button type="submit">Subir imagen</button>
      </form> -->

      <input
        type="file"
        (change)="onFileSelected($event)"
        [(ngModel)]="imagen"
        id="formImagen"
      />
    </div>

    <div
      class="flex flex-col md:flex-row md:flex-wrap md:mt-10 items-center md:justify-between w-full"
    >
      <form #fileUploadForm [formGroup]="productoForm">
        <mat-form-field class="w-52">
          <mat-label>Nombre</mat-label>
          <input
            matInput
            placeholder=""
            #nombreProducto
            name="nombreProducto"
            type="text"
            autocomplete="off"
            formControlName="nombre"
          />
          <!-- [(ngModel)]="productoRecibido.nombre" -->
        </mat-form-field>

        <mat-form-field class="h-20 w-52">
          <mat-label>Categoria</mat-label>
          <mat-select #categoriaProducto formControlName="categoria">
            <!-- [(ngModel)]="productoRecibido.categoria.id" -->

            <mat-option
              *ngFor="let categoria of categorias"
              [value]="categoria.id"
            >
              {{ categoria.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="h-20 w-52">
          <mat-label>Descripcion</mat-label>
          <input
            type="text"
            matInput
            placeholder=""
            name="descripcionProducto"
            #descripcionProducto
            autocomplete="off"
            formControlName="descripcion"
          />
          <!-- [(ngModel)]="productoRecibido.descripcion" -->
        </mat-form-field>

        <mat-form-field class="h-20 w-52">
          <mat-label>Estante</mat-label>
          <mat-select #estanteProducto formControlName="estante">
            <!-- [(ngModel)]="productoRecibido.estante.id" -->

            <mat-option *ngFor="let estante of estantes" [value]="estante.id">
              {{ estante.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="h-20 w-52">
          <mat-label>Precio</mat-label>
          <input
            matInput
            placeholder=""
            name="precioProducto"
            #precioProducto
            maxlength="10"
            onFocus="if (this.value=='0') this.value='';"
            autocomplete="off"
            formControlName="precio"
            type="number"
          />
          <!-- [(ngModel)]="
          productoRecibido.cambioPrecio[
            productoRecibido.cambioPrecio.length - 1
          ].precio
        "  -->
        </mat-form-field>
      </form>
    </div>
  </div>
  <!-- [(ngModel)]="productoRecibido.cambioPrecio[0].precio" -->

  <div mat-dialog-actions>
    <button mat-raised-button (click)="cerrarModal()">Cancelar</button>
    <button
      [disabled]="!this.productoForm.valid"
      mat-raised-button
      color="primary"
      (click)="guardar()"
    >
      Guardar
    </button>
  </div>
</div>
